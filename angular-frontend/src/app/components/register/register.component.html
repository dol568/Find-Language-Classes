<div class="login-bg">
  <div class="d-flex mx-auto flex-column justify-content-center" style="height: 100vh; width: 30%">
    <div class="card px-3 py-3 shadow-lg flex-column">
      <div class="row d-flex align-items-center justify-content-center">
        <h3 style="color: #0cabba">Sign Up!!</h3>
      </div>
      <form [formGroup]="signUpForm" (ngSubmit)="submitFunc()">
        <div class="mb-2">
          <label for="username">Username</label>
          <input
            type="text"
            class="form-control"
            id="username"
            formControlName="userName"
            minlength="8"
            [ngClass]="{ 'is-invalid': userName.invalid && userName.touched }"
          />
          @if ((userName.invalid && userName.touched) || userName.dirty) {
          <div class="invalid-feedback">
            @if (userName.errors?.['required']) {
            <span>Username is required</span>
            } @else if (userName.errors?.['minlength']) {
            <span>Must be at least 8 characters long</span>
            }
          </div>
          }
        </div>
        <div class="mb-2">
          <label for="fullname">Full Name</label>
          <input
            type="text"
            class="form-control"
            id="fullname"
            formControlName="fullName"
            [ngClass]="{ 'is-invalid': fullName.invalid && fullName.touched }"
          />
          <div
            class="invalid-feedback"
            *ngIf="(fullName.invalid && fullName.touched) || fullName.dirty"
          >
            <span *ngIf="fullName.errors?.['required']">Full name is required</span>
          </div>
        </div>

        <div class="mb-2">
          <label for="email">Email</label>
          <input
            type="text"
            class="form-control"
            id="email"
            formControlName="email"
            [ngClass]="{ 'is-invalid': email.invalid && email.touched }"
          />
          <div class="invalid-feedback" *ngIf="(email.invalid && email.touched) || email.dirty">
            <span *ngIf="email.errors?.['required']">Email address is required</span>
            <span *ngIf="email.errors?.['pattern']">Must be a valid email</span>
          </div>
        </div>
        <div class="mb-2">
          <label for="password">Password</label>
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
            formControlName="password"
            [ngClass]="{ 'is-invalid': f['password'].touched && !passwordValid }"
          />
          <div class="invalid-feedback">
            <span class="text-danger" *ngIf="f['password'].touched && !requiredValid"
              >Password is required</span
            >
            <div class="mt-3" *ngIf="requiredValid">
              <div [ngClass]="{ 'text-success': minLengthValid, 'text-danger': !minLengthValid }">
                Must be at least 8 characters long
              </div>
              <div
                [ngClass]="{
                  'text-success': requiresDigitValid,
                  'text-danger': !requiresDigitValid
                }"
              >
                Must contain at least 1 digit
              </div>
              <div
                [ngClass]="{
                  'text-success': requiresUppercaseValid,
                  'text-danger': !requiresUppercaseValid
                }"
              >
                Must contain at least 1 uppercase character
              </div>
              <div
                [ngClass]="{
                  'text-success': requiresLowercaseValid,
                  'text-danger': !requiresLowercaseValid
                }"
              >
                Must contain at least 1 lowercase character
              </div>
              <div
                [ngClass]="{
                  'text-success': requiresSpecialCharsValid,
                  'text-danger': !requiresSpecialCharsValid
                }"
              >
                Must contain at least 1 special character
              </div>
            </div>
          </div>
        </div>
        <br />
        <button
          class="btn btn-lg btn-block mt-1 btn-log"
          [disabled]="!signUpForm.valid"
          type="submit"
        >
          Sign Up
        </button>
      </form>
      <div class="text-center mt-1" style="font-size: 18px">
        <p class="small mt-2 pt-1 mb-0" style="font-weight: bold">
          Already have an account? <a routerLink=".." style="color: #dc4c64">Login</a>
        </p>
      </div>
    </div>
  </div>
</div>
