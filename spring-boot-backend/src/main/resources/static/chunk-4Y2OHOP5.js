import{a as mt,b as ge}from"./chunk-Y7S2JMKA.js";import{a as tt}from"./chunk-BZTNNV56.js";import{a as pt}from"./chunk-BI6NLLEI.js";import{B as ht}from"./chunk-3OKQNTSD.js";import{b as it,c as ne,d as nt,e as ot,f as rt,h as Ee,j as at,l as st,m as lt,t as ct}from"./chunk-ZCYJC7WO.js";import"./chunk-CFQIRN3L.js";import"./chunk-6ITZPGEO.js";import{$a as k,Aa as b,Ba as te,Ca as D,E as Be,Ea as A,Fa as ce,Ga as pe,Ha as he,I as we,Ia as l,Ib as V,J as Q,Ja as c,Ka as M,La as Xe,Ma as qe,N as le,O as We,Oa as R,Qb as Ze,R as ee,Ra as C,Rb as fe,S as N,T as U,Ta as f,Tb as et,U as He,Wa as Me,X as Le,Xa as ye,Y as Qe,Ya as be,Z as _,_ as x,_a as g,a as O,aa as Ne,ab as K,b as ke,ba as j,bb as Ge,d as w,da as I,e as B,eb as q,f as W,fb as Ae,h as F,hb as Se,ia as Y,ib as Ie,ja as je,k as se,ka as p,la as X,m as Ve,pb as $e,qb as Ke,ta as Ye,tb as me,v as ie,va as $,w as Ce,xb as Je,ya as S,za as ve,zb as de}from"./chunk-4EKNMXJU.js";var G=function(o){return o[o.ABOUT=0]="ABOUT",o[o.PHOTO=1]="PHOTO",o[o.CLASSES=2]="CLASSES",o[o.FOLLOWERS=3]="FOLLOWERS",o[o.FOLLOWINGS=4]="FOLLOWINGS",o}(G||{});var dt=(()=>{let a=class a{constructor(){this.profile=j.required(),this.photo=j.required()}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=U({type:a,selectors:[["app-profile-header"]],inputs:{profile:[N.SignalBased,"profile"],photo:[N.SignalBased,"photo"]},standalone:!0,features:[q],decls:20,vars:4,consts:[[1,"w-100","d-flex","card","flex-row","shadow-lg","align-items-center"],[1,"col-2"],["handleImageError","","alt","Profile photo",1,"rounded-circle","py-3",2,"width","100%",3,"src"],[1,"col-10","d-flex","align-items-center","justify-content-between"],[1,"card-text"],[1,"d-flex","flex-column","justify-content-start","pr-3"],[1,"d-flex","flex-row","align-items-center"],[1,"d-flex","flex-column","align-items-center","mr-4"],[2,"font-size","80px"],[1,"d-flex","flex-column","align-items-center"]],template:function(i,n){if(i&1&&(l(0,"div",0)(1,"div",1),M(2,"img",2),c(),l(3,"div",3)(4,"h2",4),g(5),c(),l(6,"div",5)(7,"div",6)(8,"div",7)(9,"h1",8),g(10),c(),l(11,"span"),g(12,"FOLLOWINGS"),c()(),l(13,"div",9)(14,"h1",8),g(15),c(),l(16,"span"),g(17,"FOLLOWERS"),c()()(),l(18,"div"),M(19,"hr"),c()()()()),i&2){let r,s,h;p(2),b("src",n.photo(),Y),p(3),k((r=n.profile())==null?null:r.fullName),p(5),k((s=n.profile())==null?null:s.followings.length),p(5),k((h=n.profile())==null?null:h.followers.length)}},dependencies:[ge,V]});let o=a;return o})();var ft=(()=>{let a=class a{constructor(){this.ProfileInfo=G,this.info=G.ABOUT,this.listInfo=new I}setInfo(t){this.listInfo.emit(t),this.info=t}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=U({type:a,selectors:[["app-profile-list"]],outputs:{listInfo:"listInfo"},standalone:!0,features:[q],decls:11,vars:10,consts:[[1,"list-group","shadow-lg"],[1,"list-group-item",3,"click"]],template:function(i,n){i&1&&(l(0,"ul",0)(1,"li",1),C("click",function(){return n.setInfo(n.ProfileInfo.ABOUT)}),g(2,"About "),c(),l(3,"li",1),C("click",function(){return n.setInfo(n.ProfileInfo.PHOTO)}),g(4,"Edit Photo "),c(),l(5,"li",1),C("click",function(){return n.setInfo(n.ProfileInfo.CLASSES)}),g(6,"Language Classes "),c(),l(7,"li",1),C("click",function(){return n.setInfo(n.ProfileInfo.FOLLOWERS)}),g(8,"Followers "),c(),l(9,"li",1),C("click",function(){return n.setInfo(n.ProfileInfo.FOLLOWINGS)}),g(10,"Followings "),c()()),i&2&&(p(),D("active",n.ProfileInfo.ABOUT===n.info),p(2),D("active",n.ProfileInfo.PHOTO===n.info),p(2),D("active",n.ProfileInfo.CLASSES===n.info),p(2),D("active",n.ProfileInfo.FOLLOWERS===n.info),p(2),D("active",n.ProfileInfo.FOLLOWINGS===n.info))},dependencies:[V]});let o=a;return o})();var At=["wrapper"],St=["sourceImage"];function It(o,a){if(o&1){let e=R();l(0,"img",5,1),C("load",function(){_(e);let i=f();return x(i.imageLoadedInView())})("mousedown",function(i){_(e);let n=f();return x(n.startMove(i,n.moveTypes.Drag))})("touchstart",function(i){_(e);let n=f();return x(n.startMove(i,n.moveTypes.Drag))})("error",function(i){_(e);let n=f();return x(n.loadImageError(i))}),c()}if(o&2){let e=f();te("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),D("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),b("src",e.safeImgDataUrl,Y),ve("alt",e.imageAltText)}}function Et(o,a){if(o&1){let e=R();Xe(0),l(1,"span",9),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"topleft"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"topleft"))}),M(2,"span",10),c(),l(3,"span",11),M(4,"span",10),c(),l(5,"span",12),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"topright"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"topright"))}),M(6,"span",10),c(),l(7,"span",13),M(8,"span",10),c(),l(9,"span",14),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"bottomright"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"bottomright"))}),M(10,"span",10),c(),l(11,"span",15),M(12,"span",10),c(),l(13,"span",16),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"bottomleft"))}),M(14,"span",10),c(),l(15,"span",17),M(16,"span",10),c(),l(17,"span",18),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"top"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"top"))}),c(),l(18,"span",19),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"right"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"right"))}),c(),l(19,"span",20),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"bottom"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"bottom"))}),c(),l(20,"span",21),C("mousedown",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"left"))})("touchstart",function(i){_(e);let n=f(2);return x(n.startMove(i,n.moveTypes.Resize,"left"))}),c(),qe()}}function Rt(o,a){if(o&1){let e=R();l(0,"div",6),C("keydown",function(i){_(e);let n=f();return x(n.keyboardAccess(i))}),l(1,"div",7),C("mousedown",function(i){_(e);let n=f();return x(n.startMove(i,n.moveTypes.Move))})("touchstart",function(i){_(e);let n=f();return x(n.startMove(i,n.moveTypes.Move))}),c(),S(2,Et,21,0,"ng-container",8),c()}if(o&2){let e=f();te("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left",e.alignImage==="center"?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),D("ngx-ic-round",e.roundCropper),ve("aria-label",e.cropperFrameAriaLabel),p(2),b("ngIf",!e.hideResizeSquares)}}var Re=class{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(a){Object.keys(a).filter(e=>e in this).forEach(e=>this[e]=a[e]),this.validateOptions()}setOptionsFromChanges(a){Object.keys(a).filter(e=>e in this).forEach(e=>this[e]=a[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}},z=function(o){return o.Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",o}(z||{});function zt(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function Tt(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function Ot(o,a){switch(o){case"ArrowUp":return{clientX:0,clientY:a*-1};case"ArrowRight":return{clientX:a,clientY:0};case"ArrowDown":return{clientX:0,clientY:a};case"ArrowLeft":default:return{clientX:a*-1,clientY:0}}}function Ft(o,a,e){let t=o.width,i=o.height;a=Math.round(a),e=Math.round(e);let n=t/a,r=i/e,s=Math.ceil(n/2),h=Math.ceil(r/2),m=o.getContext("2d");if(m){let d=m.getImageData(0,0,t,i),u=m.createImageData(a,e),v=d.data,y=u.data;for(let H=0;H<e;H++)for(let L=0;L<a;L++){let P=(L+H*a)*4,T=H*r,E=0,oe=0,ze=0,Te=0,Oe=0,Fe=0,Pe=0,wt=Math.floor(L*n),vt=Math.floor(H*r),_e=Math.ceil((L+1)*n),xe=Math.ceil((H+1)*r);_e=Math.min(_e,t),xe=Math.min(xe,i);for(let re=vt;re<xe;re++){let Ue=Math.abs(T-re)/h,Mt=L*n,yt=Ue*Ue;for(let ae=wt;ae<_e;ae++){let De=Math.abs(Mt-ae)/s,J=Math.sqrt(yt+De*De);if(J>=1)continue;E=2*J*J*J-3*J*J+1;let Z=4*(ae+re*t);Pe+=E*v[Z+3],ze+=E,v[Z+3]<255&&(E=E*v[Z+3]/250),Te+=E*v[Z],Oe+=E*v[Z+1],Fe+=E*v[Z+2],oe+=E}}y[P]=Te/oe,y[P+1]=Oe/oe,y[P+2]=Fe/oe,y[P+3]=Pe/ze}o.width=a,o.height=e,m.putImageData(u,0,0)}}function gt(o,a){return o/100*a}var Pt=(()=>{class o{crop(e,t,i,n,r){let s=this.getImagePosition(e,t,i,r),h=s.x2-s.x1,m=s.y2-s.y1,d=document.createElement("canvas");d.width=h,d.height=m;let u=d.getContext("2d");if(!u)return null;i.backgroundColor!=null&&(u.fillStyle=i.backgroundColor,u.fillRect(0,0,h,m));let v=(i.transform.scale||1)*(i.transform.flipH?-1:1),y=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:H,translateV:L}=this.getCanvasTranslate(e,i,r),P=e.transformed;u.setTransform(v,0,0,y,P.size.width/2+H,P.size.height/2+L),u.translate(-s.x1/v,-s.y1/y),u.rotate((i.transform.rotate||0)*Math.PI/180),u.drawImage(P.image,-P.size.width/2,-P.size.height/2);let T={width:h,height:m,imagePosition:s,cropperPosition:O({},t)};i.containWithinAspectRatio&&(T.offsetImagePosition=this.getOffsetImagePosition(e,t,i,r));let E=this.getResizeRatio(h,m,i);return E!==1&&(T.width=Math.round(h*E),T.height=i.maintainAspectRatio?Math.round(T.width/i.aspectRatio):Math.round(m*E),Ft(d,T.width,T.height)),n==="blob"?this.cropToBlob(T,d,i):(T.base64=d.toDataURL("image/"+i.format,this.getQuality(i)),T)}cropToBlob(e,t,i){return F(this,null,function*(){return e.blob=yield new Promise(n=>t.toBlob(n,"image/"+i.format,this.getQuality(i))),e.blob&&(e.objectUrl=URL.createObjectURL(e.blob)),e})}getCanvasTranslate(e,t,i){if(t.transform.translateUnit==="px"){let n=this.getRatio(e,i);return{translateH:(t.transform.translateH||0)*n,translateV:(t.transform.translateV||0)*n}}else return{translateH:t.transform.translateH?gt(t.transform.translateH,e.transformed.size.width):0,translateV:t.transform.translateV?gt(t.transform.translateV,e.transformed.size.height):0}}getRatio(e,t){return e.transformed.size.width/t.width}getImagePosition(e,t,i,n){let r=this.getRatio(e,n),s={x1:Math.round(t.x1*r),y1:Math.round(t.y1*r),x2:Math.round(t.x2*r),y2:Math.round(t.y2*r)};return i.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,e.transformed.size.width),s.y2=Math.min(s.y2,e.transformed.size.height)),s}getOffsetImagePosition(e,t,i,n){let r=i.canvasRotation+e.exifTransform.rotate,s=this.getRatio(e,n),h,m;r%2?(h=(e.transformed.size.width-e.original.size.height)/2,m=(e.transformed.size.height-e.original.size.width)/2):(h=(e.transformed.size.width-e.original.size.width)/2,m=(e.transformed.size.height-e.original.size.height)/2);let d={x1:Math.round(t.x1*s)-h,y1:Math.round(t.y1*s)-m,x2:Math.round(t.x2*s)-h,y2:Math.round(t.y2*s)-m};return i.containWithinAspectRatio||(d.x1=Math.max(d.x1,0),d.y1=Math.max(d.y1,0),d.x2=Math.min(d.x2,e.transformed.size.width),d.y2=Math.min(d.y2,e.transformed.size.height)),d}getResizeRatio(e,t,i){let n=i.resizeToWidth/e,r=i.resizeToHeight/t,s=new Array;i.resizeToWidth>0&&s.push(n),i.resizeToHeight>0&&s.push(r);let h=s.length===0?1:Math.min(...s);return h>1&&!i.onlyScaleDown?h:Math.min(h,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ut=(()=>{class o{resetCropperPosition(e,t,i,n){if(e?.nativeElement)if(i.cropperStaticHeight&&i.cropperStaticWidth)t.x1=0,t.x2=n.width>i.cropperStaticWidth?i.cropperStaticWidth:n.width,t.y1=0,t.y2=n.height>i.cropperStaticHeight?i.cropperStaticHeight:n.height;else{let r=Math.min(i.cropperScaledMaxWidth,n.width),s=Math.min(i.cropperScaledMaxHeight,n.height);if(!i.maintainAspectRatio)t.x1=0,t.x2=r,t.y1=0,t.y2=s;else if(n.width/i.aspectRatio<n.height){t.x1=0,t.x2=r;let h=r/i.aspectRatio;t.y1=(n.height-h)/2,t.y2=t.y1+h}else{t.y1=0,t.y2=s;let h=s*i.aspectRatio;t.x1=(n.width-h)/2,t.x2=t.x1+h}}}move(e,t,i){let n=this.getClientX(e)-t.clientX,r=this.getClientY(e)-t.clientY;i.x1=t.x1+n,i.y1=t.y1+r,i.x2=t.x2+n,i.y2=t.y2+r}resize(e,t,i,n,r){let s=this.getClientX(e)-t.clientX,h=this.getClientY(e)-t.clientY;switch(t.position){case"left":i.x1=Math.min(Math.max(t.x1+s,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(t.x1+s,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth),i.y1=Math.min(Math.max(t.y1+h,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(t.y1+h,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(t.x2+s,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth),i.y1=Math.min(Math.max(t.y1+h,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(t.x2+s,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(t.x2+s,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth),i.y2=Math.max(Math.min(t.y2+h,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(t.y2+h,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(t.x1+s,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth),i.y2=Math.max(Math.min(t.y2+h,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"center":let m=e.scale,d=Math.min(Math.max(r.cropperScaledMinWidth,Math.abs(t.x2-t.x1)*m),r.cropperScaledMaxWidth),u=Math.min(Math.max(r.cropperScaledMinHeight,Math.abs(t.y2-t.y1)*m),r.cropperScaledMaxHeight);i.x1=t.clientX-d/2,i.x2=t.clientX+d/2,i.y1=t.clientY-u/2,i.y2=t.clientY+u/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>n.width&&(i.x1-=i.x2-n.width,i.x2=n.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>n.height&&(i.y1-=i.y2-n.height,i.y2=n.height);break}r.maintainAspectRatio&&this.checkAspectRatio(t.position,i,n,r)}checkAspectRatio(e,t,i,n){let r=0,s=0;switch(e){case"top":t.x2=t.x1+(t.y2-t.y1)*n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(0-t.y1,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y1+=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"bottom":t.x2=t.x1+(t.y2-t.y1)*n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(t.y2-i.height,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y2-=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"topleft":t.y1=t.y2-(t.x2-t.x1)/n.aspectRatio,r=Math.max(0-t.x1,0),s=Math.max(0-t.y1,0),(r>0||s>0)&&(t.x1+=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y1+=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"topright":t.y1=t.y2-(t.x2-t.x1)/n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(0-t.y1,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y1+=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"right":case"bottomright":t.y2=t.y1+(t.x2-t.x1)/n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(t.y2-i.height,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y2-=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"left":case"bottomleft":t.y2=t.y1+(t.x2-t.x1)/n.aspectRatio,r=Math.max(0-t.x1,0),s=Math.max(t.y2-i.height,0),(r>0||s>0)&&(t.x1+=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y2-=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"center":t.x2=t.x1+(t.y2-t.y1)*n.aspectRatio,t.y2=t.y1+(t.x2-t.x1)/n.aspectRatio;let h=Math.max(0-t.x1,0),m=Math.max(t.x2-i.width,0),d=Math.max(t.y2-i.height,0),u=Math.max(0-t.y1,0);(h>0||m>0||d>0||u>0)&&(t.x1+=d*n.aspectRatio>h?d*n.aspectRatio:h,t.x2-=u*n.aspectRatio>m?u*n.aspectRatio:m,t.y1+=u*n.aspectRatio>m?u:m/n.aspectRatio,t.y2-=d*n.aspectRatio>h?d:h/n.aspectRatio);break}}getClientX(e){return e.touches?.[0].clientX||e.clientX||0}getClientY(e){return e.touches?.[0].clientY||e.clientY||0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Dt="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function kt(){return new Promise(o=>{let a=new Image;a.onload=()=>{let e=a.width===1&&a.height===2;o(e)},a.src=Dt})}function Vt(o){switch(typeof o=="object"&&(o=Bt(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function Bt(o){let a=new DataView(o);if(a.getUint16(0,!1)!==65496)return-2;let e=a.byteLength,t=2;for(;t<e;){if(a.getUint16(t+2,!1)<=8)return-1;let i=a.getUint16(t,!1);if(t+=2,i==65505){if(a.getUint32(t+=2,!1)!==1165519206)return-1;let n=a.getUint16(t+=6,!1)==18761;t+=a.getUint32(t+4,n);let r=a.getUint16(t,n);t+=2;for(let s=0;s<r;s++)if(a.getUint16(t+s*12,n)==274)return a.getUint16(t+s*12+8,n)}else{if((i&65280)!==65280)break;t+=a.getUint16(t,!1)}}return-1}var Wt=(()=>{class o{constructor(){this.autoRotateSupported=kt()}loadImageFile(e,t){return F(this,null,function*(){let i=yield e.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(i,e.type,t)})}checkImageTypeAndLoadImageFromArrayBuffer(e,t,i){return this.isValidImageType(t)?this.loadImageFromArrayBuffer(e,i,t):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(e)}loadImageFromURL(e,t){return F(this,null,function*(){let n=yield(yield fetch(e)).blob(),r=yield n.arrayBuffer();return yield this.loadImageFromArrayBuffer(r,t,n.type)})}loadBase64Image(e,t){let i=this.base64ToArrayBuffer(e);return this.loadImageFromArrayBuffer(i,t)}base64ToArrayBuffer(e){e=e.replace(/^data:([^;]+);base64,/gmi,"");let t=atob(e),i=t.length,n=new Uint8Array(i);for(let r=0;r<i;r++)n[r]=t.charCodeAt(r);return n.buffer}loadImageFromArrayBuffer(e,t,i){return F(this,null,function*(){let n=yield new Promise((r,s)=>F(this,null,function*(){try{let h=new Blob([e],i?{type:i}:void 0),m=URL.createObjectURL(h),d=new Image,v=i==="image/svg+xml"?yield this.getSvgImageSize(h):void 0;d.onload=()=>r({originalImage:d,originalImageSize:v,originalObjectUrl:m,originalArrayBuffer:e}),d.onerror=s,d.src=m}catch(h){s(h)}}));return yield this.transformImageFromArrayBuffer(n,t,n.originalImageSize!=null)})}getSvgImageSize(e){return F(this,null,function*(){let n=new DOMParser().parseFromString(yield e.text(),"image/svg+xml").querySelector("svg");if(!n)throw Error("Failed to parse SVG image");let r=n.getAttribute("width"),s=n.getAttribute("height");if(r&&s)return null;let h=n.getAttribute("viewBox")||n.getAttribute("viewbox");if(h){let m=h.split(" ");return{width:+m[2],height:+m[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(e,t,i=!1){return F(this,null,function*(){let n=yield this.autoRotateSupported,r=Vt(n?-1:e.originalArrayBuffer);if(!e.originalImage||!e.originalImage.complete)return Promise.reject(new Error("No image loaded"));let s={original:{objectUrl:e.originalObjectUrl,image:e.originalImage,size:e.originalImageSize??{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:r};return this.transformLoadedImage(s,t,i)})}transformLoadedImage(e,t,i=!1){return F(this,null,function*(){let n=t.canvasRotation+e.exifTransform.rotate,r=e.original.size;if(!i&&n===0&&!e.exifTransform.flip&&!t.containWithinAspectRatio)return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:O({},r)},transformed:{objectUrl:e.original.objectUrl,image:e.original.image,size:O({},r)},exifTransform:e.exifTransform};let s=this.getTransformedSize(r,e.exifTransform,t),h=document.createElement("canvas");h.width=s.width,h.height=s.height;let m=h.getContext("2d");m?.setTransform(e.exifTransform.flip?-1:1,0,0,1,h.width/2,h.height/2),m?.rotate(Math.PI*(n/2)),m?.drawImage(e.original.image,-r.width/2,-r.height/2);let d=yield new Promise(y=>h.toBlob(y,t.format));if(!d)throw new Error("Failed to get Blob for transformed image.");let u=URL.createObjectURL(d),v=yield this.loadImageFromObjectUrl(u);return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:O({},r)},transformed:{objectUrl:u,image:v,size:{width:v.width,height:v.height}},exifTransform:e.exifTransform}})}loadImageFromObjectUrl(e){return new Promise((t,i)=>{let n=new Image;n.onload=()=>t(n),n.onerror=i,n.src=e})}getTransformedSize(e,t,i){let n=i.canvasRotation+t.rotate;if(i.containWithinAspectRatio)if(n%2){let r=e.width*i.aspectRatio,s=e.height/i.aspectRatio;return{width:Math.max(e.height,r),height:Math.max(e.width,s)}}else{let r=e.height*i.aspectRatio,s=e.width/i.aspectRatio;return{width:Math.max(e.width,r),height:Math.max(e.height,s)}}return n%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),ut=(()=>{class o{constructor(e,t,i,n,r,s,h){this.cropService=e,this.cropperPositionService=t,this.loadImageService=i,this.sanitizer=n,this.cd=r,this.zone=s,this.hammerLoader=h,this.settings=new Re,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=z,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new I,this.startCropImage=new I,this.imageLoaded=new I,this.cropperReady=new I,this.loadImageFailed=new I,this.transformChange=new I,this.reset()}ngOnChanges(e){this.onChangesUpdateSettings(e),this.onChangesInputImage(e),this.loadedImage?.original.image.complete&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(this.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(e.maintainAspectRatio||e.aspectRatio)?this.resetCropperPosition():e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop())),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){let e=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${e}, ${this.transform.translateV||0}${e}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){this.loadedImage!=null&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(O({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let e=O({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(e),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){return F(this,null,function*(){yield this.hammerLoader?.();let e=window?.Hammer||null;if(e){let t=new e(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else $e()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(e){(e.width!==this.maxSize.width||e.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/e.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/e.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/e.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/e.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){let t=+e.key;t>=1&&t<=9&&(this.settings.stepSize=t)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;let i=e.shiftKey?z.Resize:z.Move,n=e.altKey?Tt(e.key):zt(e.key),r=Ot(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},i,n),this.handleMouseMove(r),this.handleMouseUp()}startMove(e,t,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===z.Pinch||t===z.Drag&&!this.allowMoveImage||(e.preventDefault&&e.preventDefault(),this.moveStart=O({active:!0,type:t,position:i,transform:O({},this.transform),clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper),this.initMouseMove())}initMouseMove(){Ce(ie(document,"mousemove"),ie(document,"touchmove")).pipe(Q(Ce(ie(document,"mouseup"),ie(document,"touchend")).pipe(Be()))).subscribe({next:e=>this.zone.run(()=>{this.handleMouseMove(e),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(e){this.safeImgDataUrl&&(e.preventDefault&&e.preventDefault(),this.moveStart=O({active:!0,type:z.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(e){if(this.moveStart.active){if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===z.Move)this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===z.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===z.Drag){let t=this.cropperPositionService.getClientX(e)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(e)-this.moveStart.clientY;this.transform=ke(O({},this.transform),{translateH:(this.moveStart.transform?.translateH||0)+t,translateV:(this.moveStart.transform?.translateV||0)+i}),this.setCssTransform()}}}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===z.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){let e=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(e.width),this.maxSize.height=parseFloat(e.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){let e=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/e:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/e:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===z.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(e=this.settings.output){if(this.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),e==="blob")return this.cropToBlob();if(e==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((e,t)=>this.zone.run(()=>F(this,null,function*(){let i=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);i?(this.imageCropped.emit(i),e(i)):t("Crop image failed")})))}cropToBase64(){let e=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return e?(this.imageCropped.emit(e),e):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return o.\u0275fac=function(e){return new(e||o)(X(Pt),X(Ut),X(Wt),X(fe),X(Ke),X(Ye),X(Ze,8))},o.\u0275cmp=U({type:o,selectors:[["image-cropper"]],viewQuery:function(e,t){if(e&1&&(Me(At,7),Me(St,5)),e&2){let i;ye(i=be())&&(t.wrapper=i.first),ye(i=be())&&(t.sourceImage=i.first)}},hostVars:6,hostBindings:function(e,t){e&1&&C("resize",function(){return t.onResize()},!1,je),e&2&&(te("text-align",t.alignImage),D("disabled",t.disabled)("ngx-ix-hidden",t.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[Qe],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(e,t){e&1&&(l(0,"div",null,0),S(2,It,2,8,"img",2),M(3,"div",3),S(4,Rt,3,16,"div",4),c()),e&2&&(te("background",t.imageVisible&&t.backgroundColor),p(2),b("ngIf",t.safeImgDataUrl),p(),te("width",t.maxSize.width,"px")("height",t.maxSize.height,"px")("margin-left",t.alignImage==="center"?t.marginLeft:null),p(),b("ngIf",t.imageVisible))},dependencies:[de],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),o})(),_t=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=He({type:o}),o.\u0275inj=We({imports:[[V]]}),o})();var xt=o=>({"is-invalid":o});function Lt(o,a){if(o&1){let e=R();l(0,"button",7),C("click",function(){_(e);let i=f(2);return x(i.changeMode())}),g(1," Edit Profile "),c()}}function Qt(o,a){if(o&1){let e=R();l(0,"button",7),C("click",function(){_(e);let i=f(2);return x(i.changeMode())}),g(1,"Cancel"),c()}}function Nt(o,a){if(o&1){let e=R();l(0,"button",8),C("click",function(){_(e);let i=f(2);return x(i.follow(i.profile().username))}),g(1,"Follow"),c()}}function jt(o,a){if(o&1){let e=R();l(0,"button",8),C("click",function(){_(e);let i=f(2);return x(i.unfollow(i.profile().username))}),g(1,"Unfollow"),c()}}function Yt(o,a){if(o&1&&(l(0,"p",9),g(1),c()),o&2){let e,t=f(3);p(),k((e=t.profile())==null?null:e.bio)}}function Xt(o,a){o&1&&(l(0,"p",9),g(1),c()),o&2&&(p(),k("Please provide your bio"))}function qt(o,a){if(o&1&&(l(0,"div",5),S(1,Yt,2,1,"p",9)(2,Xt,2,1),c()),o&2){let e,t=f(2);p(),A(1,(e=t.profile())!=null&&e.bio?1:2)}}function Gt(o,a){o&1&&(l(0,"span"),g(1,"Full name is required"),c())}function $t(o,a){if(o&1&&(l(0,"div",15),S(1,Gt,2,0,"span"),c()),o&2){let e=f(3);p(),A(1,e.fullName.errors!=null&&e.fullName.errors.required?1:-1)}}function Kt(o,a){o&1&&(l(0,"span"),g(1,"Bio is required"),c())}function Jt(o,a){o&1&&(l(0,"span"),g(1,"Bio is too long"),c())}function Zt(o,a){if(o&1&&(l(0,"div",15),S(1,Kt,2,0,"span")(2,Jt,2,0,"span"),c()),o&2){let e=f(3);p(),A(1,e.bio.errors!=null&&e.bio.errors.required?1:-1),p(),A(2,e.bio.errors!=null&&e.bio.errors.maxlength?2:-1)}}function ei(o,a){if(o&1){let e=R();l(0,"div",10)(1,"form",11),C("ngSubmit",function(){_(e);let i=f(2);return x(i.submitFunc())}),l(2,"div",12)(3,"label",13),g(4,"Full Name"),c(),M(5,"input",14),S(6,$t,2,1,"div",15),c(),l(7,"div",12)(8,"label",16),g(9,"Bio"),c(),M(10,"textarea",17),S(11,Zt,3,2,"div",15),c(),l(12,"div",12)(13,"button",18),g(14," Submit "),c()()()()}if(o&2){let e=f(2);p(),b("formGroup",e.editProfileForm),p(4),b("ngClass",Ae(6,xt,e.fullName.invalid&&e.fullName.touched)),p(),A(6,e.fullName.invalid&&e.fullName.touched||e.fullName.dirty?6:-1),p(4),b("ngClass",Ae(8,xt,e.bio.invalid&&e.bio.touched)),p(),A(11,e.bio.invalid&&e.bio.touched||e.bio.dirty?11:-1),p(2),b("disabled",!e.editProfileForm.valid)}}function ti(o,a){if(o&1&&(l(0,"div",0)(1,"div",1),M(2,"i",2),l(3,"strong"),g(4),c()(),l(5,"div"),S(6,Lt,2,0,"button",3)(7,Qt,2,0)(8,Nt,2,0)(9,jt,2,0),c()(),l(10,"div",4),S(11,qt,3,1,"div",5)(12,ei,15,10,"div",6),c()),o&2){let e,t,i=f();p(4),K("About ",(e=i.profile())==null?null:e.fullName,""),p(2),A(6,!i.isEditMode()&&((t=i.profile())==null?null:t.username)===((t=i.currentUser())==null?null:t.userName)?6:i.isEditMode()&&((t=i.profile())==null?null:t.username)===((t=i.currentUser())==null?null:t.userName)?7:i.isFollowMode&&((t=i.profile())==null?null:t.username)!==((t=i.currentUser())==null?null:t.userName)?8:!i.isFollowMode&&((t=i.profile())==null?null:t.username)!==((t=i.currentUser())==null?null:t.userName)?9:-1),p(5),A(11,i.isEditMode()?-1:11),p(),b("ngIf",i.isEditMode())}}function ii(o,a){if(o&1){let e=R();l(0,"button",7),C("click",function(){_(e);let i=f(3);return x(i.cancelPhotoSelection())}),g(1," Cancel "),c()}}function ni(o,a){if(o&1){let e=R();l(0,"input",21),C("change",function(i){_(e);let n=f(3);return x(n.fileChangeEvent(i))}),c(),l(1,"label",22),g(2,"Select Image"),c()}}function oi(o,a){if(o&1&&S(0,ii,2,0,"button",3)(1,ni,3,0),o&2){let e=f(2);A(0,e.imageChangedEvent()?0:1)}}function ri(o,a){if(o&1){let e=R();l(0,"div",20)(1,"div",23)(2,"image-cropper",24),C("imageCropped",function(i){_(e);let n=f(2);return x(n.imageCropped(i))}),c()(),l(3,"div",25),M(4,"img",26),l(5,"button",27),C("click",function(){_(e);let i=f(2);return x(i.uploadFile())}),M(6,"i",28),c()()()}if(o&2){let e=f(2);p(2),b("imageChangedEvent",e.imageChangedEvent())("maintainAspectRatio",!0)("aspectRatio",4/4)("resizeToWidth",256),p(2),b("src",e.safecroppedImage(),Y)}}function ai(o,a){if(o&1&&(l(0,"div",19)(1,"div",1)(2,"strong"),g(3,"Photo"),c()(),S(4,oi,2,1),c(),S(5,ri,7,5,"div",20)),o&2){let e,t=f();p(4),A(4,((e=t.profile())==null?null:e.username)===((e=t.currentUser())==null?null:e.userName)?4:-1),p(),A(5,t.imageChangedEvent()?5:-1)}}function si(o,a){o&1&&(l(0,"div",31)(1,"span"),g(2,"HOST"),c()())}function li(o,a){o&1&&(l(0,"div",36)(1,"span"),g(2,"ATTENDEE"),c()())}function ci(o,a){if(o&1&&(l(0,"div",29),S(1,si,3,0,"div",31)(2,li,3,0),l(3,"div",32)(4,"h4"),g(5),c()(),l(6,"div",33)(7,"h6",34),g(8),c(),l(9,"p",35),g(10),c()()()),o&2){let e,t=a.$implicit,i=f(2);p(),A(1,t.hostUserName===((e=i.profile())==null?null:e.username)?1:2),p(4),k(t.title),p(3),K("Category: ",t.category,""),p(2),Ge("Every ",i.getDaysOfWeekWords(t.dayOfWeek)," at ",t.time,"")}}function pi(o,a){o&1&&(l(0,"div",30),g(1,"No classes created or attended yet"),c())}function hi(o,a){if(o&1&&(l(0,"div",0)(1,"div",1)(2,"strong"),g(3,"Language Classes"),c()()(),pe(4,ci,11,5,"div",29,ce,!1,pi,2,0,"div",30)),o&2){let e,t=f();p(4),he((e=t.profile())==null?null:e.profileLanguageClasses)}}function mi(o,a){if(o&1&&(l(0,"div",29)(1,"div",32)(2,"h5"),g(3),c()(),l(4,"div",33)(5,"div",37)(6,"div",38),M(7,"img",39),Se(8,"authenticate"),c(),l(9,"div",40)(10,"p",41),g(11),c(),l(12,"p",41),g(13),c()()()()()),o&2){let e=a.$implicit;p(3),k(e.fullName),p(4),b("src",Ie(8,4,e.photoUrl),Y),p(4),K("Bio: ",e.bio,""),p(2),K("Username: ",e.username,"")}}function di(o,a){o&1&&(l(0,"div",30),g(1,"No followers yet"),c())}function fi(o,a){if(o&1&&(l(0,"div",0)(1,"div",1)(2,"strong"),g(3,"Followers"),c()()(),pe(4,mi,14,6,"div",29,ce,!1,di,2,0,"div",30)),o&2){let e,t=f();p(4),he((e=t.profile())==null?null:e.followers)}}function gi(o,a){if(o&1&&(l(0,"div",29)(1,"div",32)(2,"h5"),g(3),c()(),l(4,"div",33)(5,"div",37)(6,"div",38),M(7,"img",42),Se(8,"authenticate"),c(),l(9,"div",40)(10,"p",41),g(11),c(),l(12,"p",41),g(13),c()()()()()),o&2){let e=a.$implicit;p(3),k(e.fullName),p(4),b("src",Ie(8,4,e==null?null:e.photoUrl),Y),p(4),K("Bio: ",e.bio,""),p(2),K("Username: ",e.username,"")}}function ui(o,a){o&1&&(l(0,"div",30),g(1,"No followings yet"),c())}function _i(o,a){if(o&1&&(l(0,"div",0)(1,"div",1)(2,"strong"),g(3,"Followings"),c()()(),pe(4,gi,14,6,"div",29,ce,!1,ui,2,0,"div",30)),o&2){let e,t=f();p(4),he((e=t.profile())==null?null:e.followings)}}var Ct=(()=>{var a;let e=class e{constructor(){B(this,a,void 0);W(this,a,new se),this.followUser=new I,this.unFollowUser=new I,this.updateProfile=new I,this.uploadPhoto=new I,this.unsafeCroppedImage=new I,this.safecroppedImage=j.required(),this.currentUser=j.required(),this.profile=j.required(),this.listInfo=j.required(),this.isEditMode=$(!1),this.imageChangedEvent=$(""),this.crop=$(null),this.ProfileInfo=G,this.getDaysOfWeekWords=pt,this.isFollowMode=!1,me(()=>{this.profile()&&(this.isFollowMode=!this.profile()?.followers.some(i=>i.username===this.currentUser().userName),this.editProfileForm.patchValue({fullName:this.profile()?.fullName,bio:this.profile()?.bio}))})}ngOnInit(){this.editProfileForm=new rt({fullName:new Ee("",[ne.required,ne.minLength(2)]),bio:new Ee("",[ne.required,ne.maxLength(1e3)])})}ngOnDestroy(){w(this,a).next(),w(this,a).complete()}get fullName(){return this.editProfileForm.get("fullName")}get bio(){return this.editProfileForm.get("bio")}follow(i){this.followUser.emit(i),this.isFollowMode=!0}unfollow(i){this.unFollowUser.emit(i),this.isFollowMode=!1}changeMode(){this.isEditMode.set(this.isEditMode()===!1)}submitFunc(){this.updateProfile.emit(this.editProfileForm.value),this.isEditMode.set(!1)}fileChangeEvent(i){this.imageChangedEvent.set(i)}cancelPhotoSelection(){this.imageChangedEvent.set(null)}imageCropped(i){this.unsafeCroppedImage.emit(i.objectUrl),this.crop.set(i.blob)}uploadFile(){if(this.crop()&&this.profile()?.id){let i=new FormData;i.append("file",this.crop()),i.append("id",this.profile().id),this.uploadPhoto.emit(i),this.imageChangedEvent.set(null)}}};a=new WeakMap,e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=U({type:e,selectors:[["app-profile-detail"]],inputs:{safecroppedImage:[N.SignalBased,"safecroppedImage"],currentUser:[N.SignalBased,"currentUser"],profile:[N.SignalBased,"profile"],listInfo:[N.SignalBased,"listInfo"]},outputs:{followUser:"followUser",unFollowUser:"unFollowUser",updateProfile:"updateProfile",uploadPhoto:"uploadPhoto",unsafeCroppedImage:"unsafeCroppedImage"},standalone:!0,features:[q],decls:5,vars:5,consts:[[1,"d-flex","justify-content-between","flex-row","w-100","px-2","pt-3"],[2,"font-size","20px"],[1,"fas","fa-user-alt","mr-3",2,"font-size","26px"],["type","button",1,"btn","btn-outline-secondary"],[1,"px-2","w-100","d-flex","flex-column"],[1,"card-body","pl-2","mt-4","alert","alert-primary"],["class","w-100 mt-3",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"card-text","text-break"],[1,"w-100","mt-3"],[1,"w-100",3,"ngSubmit","formGroup"],[1,"form-group"],["for","fullName"],["type","text","id","fullName","placeholder","Enter full name...","formControlName","fullName",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","bio"],["id","bio","rows","3","placeholder","Enter bio...","formControlName","bio",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"d-flex","justify-content-between","flex-row","w-100","px-2","pt-3","mb-3"],[1,"row","mb-3","justify-content-center"],["id","files","type","file",2,"visibility","hidden",3,"change"],["for","files",1,"btn","btn-outline-secondary"],[1,"col-4","p-1","mx-3"],["format","png",3,"imageCropped","imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth"],[1,"col-4","p-1","d-flex","flex-column","align-items-center","justify-content-center"],[2,"width","100%",3,"src"],["type","button",1,"btn","btn-success","w-100","mt-1",3,"click"],[1,"fa","fa-check"],[1,"card","w-100","mb-3","mt-2"],["role","alert",1,"alert","alert-warning","mt-2"],[1,"ribbon"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"ribbon-not-host"],[1,"row"],[1,"col-md-2","pl-2","pr-1"],["handleImageError","","alt","image cap",2,"width","100%",3,"src"],[1,"col-md-10","pl-1"],[2,"font-size","18px"],["handleImageError","","alt","Profile photo",2,"width","100%",3,"src"]],template:function(n,r){n&1&&S(0,ti,13,4)(1,ai,6,2)(2,hi,7,1)(3,fi,7,1)(4,_i,7,1),n&2&&(A(0,r.listInfo()===r.ProfileInfo.ABOUT&&r.currentUser()?0:-1),p(),A(1,r.listInfo()===r.ProfileInfo.PHOTO?1:-1),p(),A(2,r.listInfo()===r.ProfileInfo.CLASSES?2:-1),p(),A(3,r.listInfo()===r.ProfileInfo.FOLLOWERS?3:-1),p(),A(4,r.listInfo()===r.ProfileInfo.FOLLOWINGS?4:-1))},dependencies:[V,Je,de,ct,at,it,nt,ot,st,lt,_t,ut,mt,ge]});let o=e;return o})();var bn=(()=>{var a,e,t,i,n,r;let s=class s{constructor(){B(this,a,void 0);B(this,e,void 0);B(this,t,void 0);B(this,i,void 0);B(this,n,void 0);B(this,r,void 0);W(this,a,new se),W(this,e,ee(Ne)),W(this,t,ee(tt)),W(this,i,ee(et)),W(this,n,ee(ht)),W(this,r,ee(fe)),this.profile=w(this,t).profile,this.photo=w(this,t).photo,this.currentUser=w(this,t).currentUser,this.safeCroppedImage=$(""),this.listInfo=$(G.ABOUT),this.userName=""}ngOnInit(){Le(w(this,e),()=>{me(()=>{w(this,i).paramMap.pipe(we(m=>{let d=m.get("userName");return d?w(this,t).profile$(d).pipe(we(u=>{let v=u.data?.photoUrl;return v||v?.length===0?w(this,t).loadPhoto(v):w(this,t).loadPhoto("")})):Ve}),Q(w(this,a))).subscribe({error:m=>console.error(m)})})})}follow(m){w(this,t).followUser(m).pipe(Q(w(this,a))).subscribe({next:()=>{w(this,n).success(`User '${this.profile().fullName}' has been followed`)},error:d=>console.error(d)})}unfollow(m){w(this,t).unFollowUser(m).pipe(Q(w(this,a))).subscribe({next:()=>{w(this,n).success(`User '${this.profile().fullName}' has been unfollowed`)},error:d=>console.error(d)})}updateProfile(m){w(this,t).updateProfile(this.profile()?.username,m).pipe(Q(w(this,a))).subscribe({next:()=>{w(this,n).success("User info updated")},error:d=>console.error(d)})}uploadPhoto(m){w(this,t).uploadPhoto(m).pipe(Q(w(this,a))).subscribe({next:()=>{w(this,n).success("User image updated")},error:d=>console.error(d)})}getListInfo(m){this.listInfo.set(m)}getUnsafeCroppedImage(m){this.safeCroppedImage.set(w(this,r).bypassSecurityTrustUrl(m))}};a=new WeakMap,e=new WeakMap,t=new WeakMap,i=new WeakMap,n=new WeakMap,r=new WeakMap,s.\u0275fac=function(d){return new(d||s)},s.\u0275cmp=U({type:s,selectors:[["app-profile"]],inputs:{userName:"userName"},standalone:!0,features:[q],decls:8,vars:6,consts:[[1,"mt-5","mb-3"],[1,"pt-5","container"],[3,"profile","photo"],[1,"d-flex","w-100"],[1,"col-9","shadow-lg","mt-4","align-items-start","w-100"],[3,"followUser","unFollowUser","updateProfile","uploadPhoto","unsafeCroppedImage","safecroppedImage","currentUser","profile","listInfo"],[1,"col-3","w-100","pt-4","pr-0","pl-4"],[3,"listInfo"]],template:function(d,u){d&1&&(l(0,"div",0)(1,"div",1),M(2,"app-profile-header",2),l(3,"div",3)(4,"div",4)(5,"app-profile-detail",5),C("followUser",function(y){return u.follow(y)})("unFollowUser",function(y){return u.unfollow(y)})("updateProfile",function(y){return u.updateProfile(y)})("uploadPhoto",function(y){return u.uploadPhoto(y)})("unsafeCroppedImage",function(y){return u.getUnsafeCroppedImage(y)}),c()(),l(6,"div",6)(7,"app-profile-list",7),C("listInfo",function(y){return u.getListInfo(y)}),c()()()()()),d&2&&(p(2),b("profile",u.profile())("photo",u.photo()),p(3),b("safecroppedImage",u.safeCroppedImage())("currentUser",u.currentUser())("profile",u.profile())("listInfo",u.listInfo()))},dependencies:[dt,ft,Ct,V]});let o=s;return o})();export{bn as ProfileComponent};
