import{a as rt}from"./chunk-TMLNYX2X.js";import{B as at}from"./chunk-NBB77AJ7.js";import{b as Ke,c as ne,d as Je,e as Ze,f as et,h as be,j as tt,l as it,m as nt,t as ot}from"./chunk-LPNURCST.js";import{d as $e}from"./chunk-PP4ENBKG.js";import{$ as u,$a as Me,Ab as Xe,Ba as A,Ca as Ce,Cb as de,Da as y,Ea as ee,Fa as U,G as Ue,Ha as b,Ia as ce,Ja as pe,K as ke,Ka as he,L as Q,La as l,Lb as D,Ma as c,Na as M,Oa as Le,P as le,Pa as Qe,Q as De,Ra as E,T as ie,U as N,Ua as x,Ub as qe,V as P,Vb as fe,W as Ve,Wa as d,Xb as Ge,Za as we,_ as Be,_a as ve,a as T,aa as _,b as Fe,bb as g,cb as k,d as v,db as K,e as H,ea as j,eb as Ne,f as L,ga as S,h as O,hb as q,ib as ye,k as se,la as Y,m as Pe,ma as We,na as h,oa as X,sb as je,tb as Ye,v as te,w as xe,wa as He,wb as me,ya as $}from"./chunk-63EQNU4F.js";var G=function(o){return o[o.ABOUT=0]="ABOUT",o[o.PHOTO=1]="PHOTO",o[o.CLASSES=2]="CLASSES",o[o.FOLLOWERS=3]="FOLLOWERS",o[o.FOLLOWINGS=4]="FOLLOWINGS",o}(G||{});var st=(()=>{let a=class a{constructor(){this.profile=j.required(),this.photo=j.required()}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=P({type:a,selectors:[["app-profile-header"]],inputs:{profile:[N.SignalBased,"profile"],photo:[N.SignalBased,"photo"]},standalone:!0,features:[q],decls:20,vars:4,consts:[[1,"w-100","d-flex","card","flex-row","shadow-lg","align-items-center"],[1,"col-2"],["alt","Profile photo",1,"rounded-circle","py-3",2,"width","100%",3,"src"],[1,"col-10","d-flex","align-items-center","justify-content-between"],[1,"card-text"],[1,"d-flex","flex-column","justify-content-start","pr-3"],[1,"d-flex","flex-row","align-items-center"],[1,"d-flex","flex-column","align-items-center","mr-4"],[2,"font-size","80px"],[1,"d-flex","flex-column","align-items-center"]],template:function(i,n){if(i&1&&(l(0,"div",0)(1,"div",1),M(2,"img",2),c(),l(3,"div",3)(4,"h2",4),g(5),c(),l(6,"div",5)(7,"div",6)(8,"div",7)(9,"h1",8),g(10),c(),l(11,"span"),g(12,"FOLLOWINGS"),c()(),l(13,"div",9)(14,"h1",8),g(15),c(),l(16,"span"),g(17,"FOLLOWERS"),c()()(),l(18,"div"),M(19,"hr"),c()()()()),i&2){let r,s,p;h(2),y("src",n.photo(),Y),h(3),k((r=n.profile())==null?null:r.fullName),h(5),k((s=n.profile())==null?null:s.followings.length),h(5),k((p=n.profile())==null?null:p.followers.length)}},dependencies:[D]});let o=a;return o})();var lt=(()=>{let a=class a{constructor(){this.ProfileInfo=G,this.info=G.ABOUT,this.listInfo=new S}setInfo(t){this.listInfo.emit(t),this.info=t}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=P({type:a,selectors:[["app-profile-list"]],outputs:{listInfo:"listInfo"},standalone:!0,features:[q],decls:11,vars:10,consts:[[1,"list-group","shadow-lg"],[1,"list-group-item",3,"click"]],template:function(i,n){i&1&&(l(0,"ul",0)(1,"li",1),x("click",function(){return n.setInfo(n.ProfileInfo.ABOUT)}),g(2," About "),c(),l(3,"li",1),x("click",function(){return n.setInfo(n.ProfileInfo.PHOTO)}),g(4," Edit Photo "),c(),l(5,"li",1),x("click",function(){return n.setInfo(n.ProfileInfo.CLASSES)}),g(6," Language Classes "),c(),l(7,"li",1),x("click",function(){return n.setInfo(n.ProfileInfo.FOLLOWERS)}),g(8," Followers "),c(),l(9,"li",1),x("click",function(){return n.setInfo(n.ProfileInfo.FOLLOWINGS)}),g(10," Followings "),c()()),i&2&&(h(),U("active",n.ProfileInfo.ABOUT===n.info),h(2),U("active",n.ProfileInfo.PHOTO===n.info),h(2),U("active",n.ProfileInfo.CLASSES===n.info),h(2),U("active",n.ProfileInfo.FOLLOWERS===n.info),h(2),U("active",n.ProfileInfo.FOLLOWINGS===n.info))},dependencies:[D]});let o=a;return o})();var Ct=["wrapper"],wt=["sourceImage"];function vt(o,a){if(o&1){let e=E();l(0,"img",5,1),x("load",function(){u(e);let i=d();return _(i.imageLoadedInView())})("mousedown",function(i){u(e);let n=d();return _(n.startMove(i,n.moveTypes.Drag))})("touchstart",function(i){u(e);let n=d();return _(n.startMove(i,n.moveTypes.Drag))})("error",function(i){u(e);let n=d();return _(n.loadImageError(i))}),c()}if(o&2){let e=d();ee("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),U("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),y("src",e.safeImgDataUrl,Y),Ce("alt",e.imageAltText)}}function Mt(o,a){if(o&1){let e=E();Le(0),l(1,"span",9),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"topleft"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"topleft"))}),M(2,"span",10),c(),l(3,"span",11),M(4,"span",10),c(),l(5,"span",12),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"topright"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"topright"))}),M(6,"span",10),c(),l(7,"span",13),M(8,"span",10),c(),l(9,"span",14),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"bottomright"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"bottomright"))}),M(10,"span",10),c(),l(11,"span",15),M(12,"span",10),c(),l(13,"span",16),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"bottomleft"))}),M(14,"span",10),c(),l(15,"span",17),M(16,"span",10),c(),l(17,"span",18),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"top"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"top"))}),c(),l(18,"span",19),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"right"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"right"))}),c(),l(19,"span",20),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"bottom"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"bottom"))}),c(),l(20,"span",21),x("mousedown",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"left"))})("touchstart",function(i){u(e);let n=d(2);return _(n.startMove(i,n.moveTypes.Resize,"left"))}),c(),Qe()}}function yt(o,a){if(o&1){let e=E();l(0,"div",6),x("keydown",function(i){u(e);let n=d();return _(n.keyboardAccess(i))}),l(1,"div",7),x("mousedown",function(i){u(e);let n=d();return _(n.startMove(i,n.moveTypes.Move))})("touchstart",function(i){u(e);let n=d();return _(n.startMove(i,n.moveTypes.Move))}),c(),A(2,Mt,21,0,"ng-container",8),c()}if(o&2){let e=d();ee("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left",e.alignImage==="center"?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),U("ngx-ic-round",e.roundCropper),Ce("aria-label",e.cropperFrameAriaLabel),h(2),y("ngIf",!e.hideResizeSquares)}}var Ae=class{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(a){Object.keys(a).filter(e=>e in this).forEach(e=>this[e]=a[e]),this.validateOptions()}setOptionsFromChanges(a){Object.keys(a).filter(e=>e in this).forEach(e=>this[e]=a[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}},R=function(o){return o.Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",o}(R||{});function bt(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function At(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function St(o,a){switch(o){case"ArrowUp":return{clientX:0,clientY:a*-1};case"ArrowRight":return{clientX:a,clientY:0};case"ArrowDown":return{clientX:0,clientY:a};case"ArrowLeft":default:return{clientX:a*-1,clientY:0}}}function It(o,a,e){let t=o.width,i=o.height;a=Math.round(a),e=Math.round(e);let n=t/a,r=i/e,s=Math.ceil(n/2),p=Math.ceil(r/2),m=o.getContext("2d");if(m){let f=m.getImageData(0,0,t,i),C=m.createImageData(a,e),w=f.data,V=C.data;for(let B=0;B<e;B++)for(let W=0;W<a;W++){let F=(W+B*a)*4,z=B*r,I=0,oe=0,Se=0,Ie=0,Ee=0,Re=0,ze=0,ft=Math.floor(W*n),gt=Math.floor(B*r),ue=Math.ceil((W+1)*n),_e=Math.ceil((B+1)*r);ue=Math.min(ue,t),_e=Math.min(_e,i);for(let re=gt;re<_e;re++){let Te=Math.abs(z-re)/p,ut=W*n,_t=Te*Te;for(let ae=ft;ae<ue;ae++){let Oe=Math.abs(ut-ae)/s,J=Math.sqrt(_t+Oe*Oe);if(J>=1)continue;I=2*J*J*J-3*J*J+1;let Z=4*(ae+re*t);ze+=I*w[Z+3],Se+=I,w[Z+3]<255&&(I=I*w[Z+3]/250),Ie+=I*w[Z],Ee+=I*w[Z+1],Re+=I*w[Z+2],oe+=I}}V[F]=Ie/oe,V[F+1]=Ee/oe,V[F+2]=Re/oe,V[F+3]=ze/Se}o.width=a,o.height=e,m.putImageData(C,0,0)}}function ct(o,a){return o/100*a}var Et=(()=>{class o{crop(e,t,i,n,r){let s=this.getImagePosition(e,t,i,r),p=s.x2-s.x1,m=s.y2-s.y1,f=document.createElement("canvas");f.width=p,f.height=m;let C=f.getContext("2d");if(!C)return null;i.backgroundColor!=null&&(C.fillStyle=i.backgroundColor,C.fillRect(0,0,p,m));let w=(i.transform.scale||1)*(i.transform.flipH?-1:1),V=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:B,translateV:W}=this.getCanvasTranslate(e,i,r),F=e.transformed;C.setTransform(w,0,0,V,F.size.width/2+B,F.size.height/2+W),C.translate(-s.x1/w,-s.y1/V),C.rotate((i.transform.rotate||0)*Math.PI/180),C.drawImage(F.image,-F.size.width/2,-F.size.height/2);let z={width:p,height:m,imagePosition:s,cropperPosition:T({},t)};i.containWithinAspectRatio&&(z.offsetImagePosition=this.getOffsetImagePosition(e,t,i,r));let I=this.getResizeRatio(p,m,i);return I!==1&&(z.width=Math.round(p*I),z.height=i.maintainAspectRatio?Math.round(z.width/i.aspectRatio):Math.round(m*I),It(f,z.width,z.height)),n==="blob"?this.cropToBlob(z,f,i):(z.base64=f.toDataURL("image/"+i.format,this.getQuality(i)),z)}cropToBlob(e,t,i){return O(this,null,function*(){return e.blob=yield new Promise(n=>t.toBlob(n,"image/"+i.format,this.getQuality(i))),e.blob&&(e.objectUrl=URL.createObjectURL(e.blob)),e})}getCanvasTranslate(e,t,i){if(t.transform.translateUnit==="px"){let n=this.getRatio(e,i);return{translateH:(t.transform.translateH||0)*n,translateV:(t.transform.translateV||0)*n}}else return{translateH:t.transform.translateH?ct(t.transform.translateH,e.transformed.size.width):0,translateV:t.transform.translateV?ct(t.transform.translateV,e.transformed.size.height):0}}getRatio(e,t){return e.transformed.size.width/t.width}getImagePosition(e,t,i,n){let r=this.getRatio(e,n),s={x1:Math.round(t.x1*r),y1:Math.round(t.y1*r),x2:Math.round(t.x2*r),y2:Math.round(t.y2*r)};return i.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,e.transformed.size.width),s.y2=Math.min(s.y2,e.transformed.size.height)),s}getOffsetImagePosition(e,t,i,n){let r=i.canvasRotation+e.exifTransform.rotate,s=this.getRatio(e,n),p,m;r%2?(p=(e.transformed.size.width-e.original.size.height)/2,m=(e.transformed.size.height-e.original.size.width)/2):(p=(e.transformed.size.width-e.original.size.width)/2,m=(e.transformed.size.height-e.original.size.height)/2);let f={x1:Math.round(t.x1*s)-p,y1:Math.round(t.y1*s)-m,x2:Math.round(t.x2*s)-p,y2:Math.round(t.y2*s)-m};return i.containWithinAspectRatio||(f.x1=Math.max(f.x1,0),f.y1=Math.max(f.y1,0),f.x2=Math.min(f.x2,e.transformed.size.width),f.y2=Math.min(f.y2,e.transformed.size.height)),f}getResizeRatio(e,t,i){let n=i.resizeToWidth/e,r=i.resizeToHeight/t,s=new Array;i.resizeToWidth>0&&s.push(n),i.resizeToHeight>0&&s.push(r);let p=s.length===0?1:Math.min(...s);return p>1&&!i.onlyScaleDown?p:Math.min(p,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Rt=(()=>{class o{resetCropperPosition(e,t,i,n){if(e?.nativeElement)if(i.cropperStaticHeight&&i.cropperStaticWidth)t.x1=0,t.x2=n.width>i.cropperStaticWidth?i.cropperStaticWidth:n.width,t.y1=0,t.y2=n.height>i.cropperStaticHeight?i.cropperStaticHeight:n.height;else{let r=Math.min(i.cropperScaledMaxWidth,n.width),s=Math.min(i.cropperScaledMaxHeight,n.height);if(!i.maintainAspectRatio)t.x1=0,t.x2=r,t.y1=0,t.y2=s;else if(n.width/i.aspectRatio<n.height){t.x1=0,t.x2=r;let p=r/i.aspectRatio;t.y1=(n.height-p)/2,t.y2=t.y1+p}else{t.y1=0,t.y2=s;let p=s*i.aspectRatio;t.x1=(n.width-p)/2,t.x2=t.x1+p}}}move(e,t,i){let n=this.getClientX(e)-t.clientX,r=this.getClientY(e)-t.clientY;i.x1=t.x1+n,i.y1=t.y1+r,i.x2=t.x2+n,i.y2=t.y2+r}resize(e,t,i,n,r){let s=this.getClientX(e)-t.clientX,p=this.getClientY(e)-t.clientY;switch(t.position){case"left":i.x1=Math.min(Math.max(t.x1+s,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(t.x1+s,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth),i.y1=Math.min(Math.max(t.y1+p,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(t.y1+p,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(t.x2+s,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth),i.y1=Math.min(Math.max(t.y1+p,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(t.x2+s,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(t.x2+s,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth),i.y2=Math.max(Math.min(t.y2+p,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(t.y2+p,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(t.x1+s,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth),i.y2=Math.max(Math.min(t.y2+p,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"center":let m=e.scale,f=Math.min(Math.max(r.cropperScaledMinWidth,Math.abs(t.x2-t.x1)*m),r.cropperScaledMaxWidth),C=Math.min(Math.max(r.cropperScaledMinHeight,Math.abs(t.y2-t.y1)*m),r.cropperScaledMaxHeight);i.x1=t.clientX-f/2,i.x2=t.clientX+f/2,i.y1=t.clientY-C/2,i.y2=t.clientY+C/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>n.width&&(i.x1-=i.x2-n.width,i.x2=n.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>n.height&&(i.y1-=i.y2-n.height,i.y2=n.height);break}r.maintainAspectRatio&&this.checkAspectRatio(t.position,i,n,r)}checkAspectRatio(e,t,i,n){let r=0,s=0;switch(e){case"top":t.x2=t.x1+(t.y2-t.y1)*n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(0-t.y1,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y1+=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"bottom":t.x2=t.x1+(t.y2-t.y1)*n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(t.y2-i.height,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y2-=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"topleft":t.y1=t.y2-(t.x2-t.x1)/n.aspectRatio,r=Math.max(0-t.x1,0),s=Math.max(0-t.y1,0),(r>0||s>0)&&(t.x1+=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y1+=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"topright":t.y1=t.y2-(t.x2-t.x1)/n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(0-t.y1,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y1+=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"right":case"bottomright":t.y2=t.y1+(t.x2-t.x1)/n.aspectRatio,r=Math.max(t.x2-i.width,0),s=Math.max(t.y2-i.height,0),(r>0||s>0)&&(t.x2-=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y2-=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"left":case"bottomleft":t.y2=t.y1+(t.x2-t.x1)/n.aspectRatio,r=Math.max(0-t.x1,0),s=Math.max(t.y2-i.height,0),(r>0||s>0)&&(t.x1+=s*n.aspectRatio>r?s*n.aspectRatio:r,t.y2-=s*n.aspectRatio>r?s:r/n.aspectRatio);break;case"center":t.x2=t.x1+(t.y2-t.y1)*n.aspectRatio,t.y2=t.y1+(t.x2-t.x1)/n.aspectRatio;let p=Math.max(0-t.x1,0),m=Math.max(t.x2-i.width,0),f=Math.max(t.y2-i.height,0),C=Math.max(0-t.y1,0);(p>0||m>0||f>0||C>0)&&(t.x1+=f*n.aspectRatio>p?f*n.aspectRatio:p,t.x2-=C*n.aspectRatio>m?C*n.aspectRatio:m,t.y1+=C*n.aspectRatio>m?C:m/n.aspectRatio,t.y2-=f*n.aspectRatio>p?f:p/n.aspectRatio);break}}getClientX(e){return e.touches?.[0].clientX||e.clientX||0}getClientY(e){return e.touches?.[0].clientY||e.clientY||0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),zt="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function Tt(){return new Promise(o=>{let a=new Image;a.onload=()=>{let e=a.width===1&&a.height===2;o(e)},a.src=zt})}function Ot(o){switch(typeof o=="object"&&(o=Ft(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function Ft(o){let a=new DataView(o);if(a.getUint16(0,!1)!==65496)return-2;let e=a.byteLength,t=2;for(;t<e;){if(a.getUint16(t+2,!1)<=8)return-1;let i=a.getUint16(t,!1);if(t+=2,i==65505){if(a.getUint32(t+=2,!1)!==1165519206)return-1;let n=a.getUint16(t+=6,!1)==18761;t+=a.getUint32(t+4,n);let r=a.getUint16(t,n);t+=2;for(let s=0;s<r;s++)if(a.getUint16(t+s*12,n)==274)return a.getUint16(t+s*12+8,n)}else{if((i&65280)!==65280)break;t+=a.getUint16(t,!1)}}return-1}var Pt=(()=>{class o{constructor(){this.autoRotateSupported=Tt()}loadImageFile(e,t){return O(this,null,function*(){let i=yield e.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(i,e.type,t)})}checkImageTypeAndLoadImageFromArrayBuffer(e,t,i){return this.isValidImageType(t)?this.loadImageFromArrayBuffer(e,i,t):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(e)}loadImageFromURL(e,t){return O(this,null,function*(){let n=yield(yield fetch(e)).blob(),r=yield n.arrayBuffer();return yield this.loadImageFromArrayBuffer(r,t,n.type)})}loadBase64Image(e,t){let i=this.base64ToArrayBuffer(e);return this.loadImageFromArrayBuffer(i,t)}base64ToArrayBuffer(e){e=e.replace(/^data:([^;]+);base64,/gmi,"");let t=atob(e),i=t.length,n=new Uint8Array(i);for(let r=0;r<i;r++)n[r]=t.charCodeAt(r);return n.buffer}loadImageFromArrayBuffer(e,t,i){return O(this,null,function*(){let n=yield new Promise((r,s)=>O(this,null,function*(){try{let p=new Blob([e],i?{type:i}:void 0),m=URL.createObjectURL(p),f=new Image,w=i==="image/svg+xml"?yield this.getSvgImageSize(p):void 0;f.onload=()=>r({originalImage:f,originalImageSize:w,originalObjectUrl:m,originalArrayBuffer:e}),f.onerror=s,f.src=m}catch(p){s(p)}}));return yield this.transformImageFromArrayBuffer(n,t,n.originalImageSize!=null)})}getSvgImageSize(e){return O(this,null,function*(){let n=new DOMParser().parseFromString(yield e.text(),"image/svg+xml").querySelector("svg");if(!n)throw Error("Failed to parse SVG image");let r=n.getAttribute("width"),s=n.getAttribute("height");if(r&&s)return null;let p=n.getAttribute("viewBox")||n.getAttribute("viewbox");if(p){let m=p.split(" ");return{width:+m[2],height:+m[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(e,t,i=!1){return O(this,null,function*(){let n=yield this.autoRotateSupported,r=Ot(n?-1:e.originalArrayBuffer);if(!e.originalImage||!e.originalImage.complete)return Promise.reject(new Error("No image loaded"));let s={original:{objectUrl:e.originalObjectUrl,image:e.originalImage,size:e.originalImageSize??{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:r};return this.transformLoadedImage(s,t,i)})}transformLoadedImage(e,t,i=!1){return O(this,null,function*(){let n=t.canvasRotation+e.exifTransform.rotate,r=e.original.size;if(!i&&n===0&&!e.exifTransform.flip&&!t.containWithinAspectRatio)return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:T({},r)},transformed:{objectUrl:e.original.objectUrl,image:e.original.image,size:T({},r)},exifTransform:e.exifTransform};let s=this.getTransformedSize(r,e.exifTransform,t),p=document.createElement("canvas");p.width=s.width,p.height=s.height;let m=p.getContext("2d");m?.setTransform(e.exifTransform.flip?-1:1,0,0,1,p.width/2,p.height/2),m?.rotate(Math.PI*(n/2)),m?.drawImage(e.original.image,-r.width/2,-r.height/2);let f=yield new Promise(V=>p.toBlob(V,t.format));if(!f)throw new Error("Failed to get Blob for transformed image.");let C=URL.createObjectURL(f),w=yield this.loadImageFromObjectUrl(C);return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:T({},r)},transformed:{objectUrl:C,image:w,size:{width:w.width,height:w.height}},exifTransform:e.exifTransform}})}loadImageFromObjectUrl(e){return new Promise((t,i)=>{let n=new Image;n.onload=()=>t(n),n.onerror=i,n.src=e})}getTransformedSize(e,t,i){let n=i.canvasRotation+t.rotate;if(i.containWithinAspectRatio)if(n%2){let r=e.width*i.aspectRatio,s=e.height/i.aspectRatio;return{width:Math.max(e.height,r),height:Math.max(e.width,s)}}else{let r=e.height*i.aspectRatio,s=e.width/i.aspectRatio;return{width:Math.max(e.width,r),height:Math.max(e.height,s)}}return n%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),pt=(()=>{class o{constructor(e,t,i,n,r,s,p){this.cropService=e,this.cropperPositionService=t,this.loadImageService=i,this.sanitizer=n,this.cd=r,this.zone=s,this.hammerLoader=p,this.settings=new Ae,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=R,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new S,this.startCropImage=new S,this.imageLoaded=new S,this.cropperReady=new S,this.loadImageFailed=new S,this.transformChange=new S,this.reset()}ngOnChanges(e){this.onChangesUpdateSettings(e),this.onChangesInputImage(e),this.loadedImage?.original.image.complete&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(this.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(e.maintainAspectRatio||e.aspectRatio)?this.resetCropperPosition():e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop())),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){let e=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${e}, ${this.transform.translateV||0}${e}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(t=>this.setLoadedImage(t)).catch(t=>this.loadImageError(t))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){this.loadedImage!=null&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(T({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let e=T({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(e),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){return O(this,null,function*(){yield this.hammerLoader?.();let e=window?.Hammer||null;if(e){let t=new e(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else je()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(e){(e.width!==this.maxSize.width||e.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/e.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/e.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/e.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/e.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){let t=+e.key;t>=1&&t<=9&&(this.settings.stepSize=t)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;let i=e.shiftKey?R.Resize:R.Move,n=e.altKey?At(e.key):bt(e.key),r=St(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},i,n),this.handleMouseMove(r),this.handleMouseUp()}startMove(e,t,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===R.Pinch||t===R.Drag&&!this.allowMoveImage||(e.preventDefault&&e.preventDefault(),this.moveStart=T({active:!0,type:t,position:i,transform:T({},this.transform),clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper),this.initMouseMove())}initMouseMove(){xe(te(document,"mousemove"),te(document,"touchmove")).pipe(Q(xe(te(document,"mouseup"),te(document,"touchend")).pipe(Ue()))).subscribe({next:e=>this.zone.run(()=>{this.handleMouseMove(e),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(e){this.safeImgDataUrl&&(e.preventDefault&&e.preventDefault(),this.moveStart=T({active:!0,type:R.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(e){if(this.moveStart.active){if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===R.Move)this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===R.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===R.Drag){let t=this.cropperPositionService.getClientX(e)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(e)-this.moveStart.clientY;this.transform=Fe(T({},this.transform),{translateH:(this.moveStart.transform?.translateH||0)+t,translateV:(this.moveStart.transform?.translateV||0)+i}),this.setCssTransform()}}}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===R.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){let e=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(e.width),this.maxSize.height=parseFloat(e.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){let e=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/e:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/e:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===R.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(e=this.settings.output){if(this.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),e==="blob")return this.cropToBlob();if(e==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((e,t)=>this.zone.run(()=>O(this,null,function*(){let i=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);i?(this.imageCropped.emit(i),e(i)):t("Crop image failed")})))}cropToBase64(){let e=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return e?(this.imageCropped.emit(e),e):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return o.\u0275fac=function(e){return new(e||o)(X(Et),X(Rt),X(Pt),X(fe),X(Ye),X(He),X(qe,8))},o.\u0275cmp=P({type:o,selectors:[["image-cropper"]],viewQuery:function(e,t){if(e&1&&(we(Ct,7),we(wt,5)),e&2){let i;ve(i=Me())&&(t.wrapper=i.first),ve(i=Me())&&(t.sourceImage=i.first)}},hostVars:6,hostBindings:function(e,t){e&1&&x("resize",function(){return t.onResize()},!1,We),e&2&&(ee("text-align",t.alignImage),U("disabled",t.disabled)("ngx-ix-hidden",t.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[Be],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(e,t){e&1&&(l(0,"div",null,0),A(2,vt,2,8,"img",2),M(3,"div",3),A(4,yt,3,16,"div",4),c()),e&2&&(ee("background",t.imageVisible&&t.backgroundColor),h(2),y("ngIf",t.safeImgDataUrl),h(),ee("width",t.maxSize.width,"px")("height",t.maxSize.height,"px")("margin-left",t.alignImage==="center"?t.marginLeft:null),h(),y("ngIf",t.imageVisible))},dependencies:[de],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),o})(),ht=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Ve({type:o}),o.\u0275inj=De({imports:[[D]]}),o})();var mt=o=>({"is-invalid":o});function kt(o,a){if(o&1){let e=E();l(0,"button",7),x("click",function(){u(e);let i=d(2);return _(i.changeMode())}),g(1," Edit Profile "),c()}}function Dt(o,a){if(o&1){let e=E();l(0,"button",7),x("click",function(){u(e);let i=d(2);return _(i.changeMode())}),g(1,"Cancel"),c()}}function Vt(o,a){if(o&1){let e=E();l(0,"button",8),x("click",function(){u(e);let i=d(2);return _(i.follow(i.profile().username))}),g(1,"Follow"),c()}}function Bt(o,a){if(o&1){let e=E();l(0,"button",8),x("click",function(){u(e);let i=d(2);return _(i.unfollow(i.profile().username))}),g(1,"Unfollow"),c()}}function Wt(o,a){if(o&1&&(l(0,"p",9),g(1),c()),o&2){let e,t=d(3);h(),k((e=t.profile())==null?null:e.bio)}}function Ht(o,a){o&1&&(l(0,"p",9),g(1),c()),o&2&&(h(),k("Please provide your bio"))}function Lt(o,a){if(o&1&&(l(0,"div",5),A(1,Wt,2,1,"p",9)(2,Ht,2,1),c()),o&2){let e,t=d(2);h(),b(1,(e=t.profile())!=null&&e.bio?1:2)}}function Qt(o,a){o&1&&(l(0,"span"),g(1,"Full name is required"),c())}function Nt(o,a){if(o&1&&(l(0,"div",15),A(1,Qt,2,0,"span"),c()),o&2){let e=d(3);h(),b(1,e.fullName.errors!=null&&e.fullName.errors.required?1:-1)}}function jt(o,a){o&1&&(l(0,"span"),g(1,"Bio is required"),c())}function Yt(o,a){o&1&&(l(0,"span"),g(1,"Bio is too long"),c())}function Xt(o,a){if(o&1&&(l(0,"div",15),A(1,jt,2,0,"span")(2,Yt,2,0,"span"),c()),o&2){let e=d(3);h(),b(1,e.bio.errors!=null&&e.bio.errors.required?1:-1),h(),b(2,e.bio.errors!=null&&e.bio.errors.maxlength?2:-1)}}function qt(o,a){if(o&1){let e=E();l(0,"div",10)(1,"form",11),x("ngSubmit",function(){u(e);let i=d(2);return _(i.submitFunc())}),l(2,"div",12)(3,"label",13),g(4,"Full Name"),c(),M(5,"input",14),A(6,Nt,2,1,"div",15),c(),l(7,"div",12)(8,"label",16),g(9,"Bio"),c(),M(10,"textarea",17),A(11,Xt,3,2,"div",15),c(),l(12,"div",12)(13,"button",18),g(14," Submit "),c()()()()}if(o&2){let e=d(2);h(),y("formGroup",e.editProfileForm),h(4),y("ngClass",ye(6,mt,e.fullName.invalid&&e.fullName.touched)),h(),b(6,e.fullName.invalid&&e.fullName.touched||e.fullName.dirty?6:-1),h(4),y("ngClass",ye(8,mt,e.bio.invalid&&e.bio.touched)),h(),b(11,e.bio.invalid&&e.bio.touched||e.bio.dirty?11:-1),h(2),y("disabled",!e.editProfileForm.valid)}}function Gt(o,a){if(o&1&&(l(0,"div",0)(1,"div",1),M(2,"i",2),l(3,"strong"),g(4),c()(),l(5,"div"),A(6,kt,2,0,"button",3)(7,Dt,2,0)(8,Vt,2,0)(9,Bt,2,0),c()(),l(10,"div",4),A(11,Lt,3,1,"div",5)(12,qt,15,10,"div",6),c()),o&2){let e,t,i=d();h(4),K("About ",(e=i.profile())==null?null:e.fullName,""),h(2),b(6,!i.isEditMode()&&((t=i.profile())==null?null:t.username)===((t=i.currentUser())==null?null:t.userName)?6:i.isEditMode()&&((t=i.profile())==null?null:t.username)===((t=i.currentUser())==null?null:t.userName)?7:i.isFollowMode&&((t=i.profile())==null?null:t.username)!==((t=i.currentUser())==null?null:t.userName)?8:!i.isFollowMode&&((t=i.profile())==null?null:t.username)!==((t=i.currentUser())==null?null:t.userName)?9:-1),h(5),b(11,i.isEditMode()?-1:11),h(),y("ngIf",i.isEditMode())}}function $t(o,a){if(o&1){let e=E();l(0,"button",7),x("click",function(){u(e);let i=d(3);return _(i.cancelPhotoSelection())}),g(1," Cancel "),c()}}function Kt(o,a){if(o&1){let e=E();l(0,"input",21),x("change",function(i){u(e);let n=d(3);return _(n.fileChangeEvent(i))}),c(),l(1,"label",22),g(2,"Select Image"),c()}}function Jt(o,a){if(o&1&&A(0,$t,2,0,"button",3)(1,Kt,3,0),o&2){let e=d(2);b(0,e.imageChangedEvent()?0:1)}}function Zt(o,a){if(o&1){let e=E();l(0,"div",20)(1,"div",23)(2,"image-cropper",24),x("imageCropped",function(i){u(e);let n=d(2);return _(n.imageCropped(i))}),c()(),l(3,"div",25),M(4,"img",26),l(5,"button",27),x("click",function(){u(e);let i=d(2);return _(i.uploadFile())}),M(6,"i",28),c()()()}if(o&2){let e=d(2);h(2),y("imageChangedEvent",e.imageChangedEvent())("maintainAspectRatio",!0)("aspectRatio",4/4)("resizeToWidth",256),h(2),y("src",e.safecroppedImage(),Y)}}function ei(o,a){if(o&1&&(l(0,"div",19)(1,"div",1)(2,"strong"),g(3,"Photo"),c()(),A(4,Jt,2,1),c(),A(5,Zt,7,5,"div",20)),o&2){let e,t=d();h(4),b(4,((e=t.profile())==null?null:e.username)===((e=t.currentUser())==null?null:e.userName)?4:-1),h(),b(5,t.imageChangedEvent()?5:-1)}}function ti(o,a){o&1&&(l(0,"div",31)(1,"span"),g(2,"HOST"),c()())}function ii(o,a){o&1&&(l(0,"div",36)(1,"span"),g(2,"ATTENDEE"),c()())}function ni(o,a){if(o&1&&(l(0,"div",29),A(1,ti,3,0,"div",31)(2,ii,3,0),l(3,"div",32)(4,"h4"),g(5),c()(),l(6,"div",33)(7,"h6",34),g(8),c(),l(9,"p",35),g(10),c()()()),o&2){let e,t=a.$implicit,i=d(2);h(),b(1,t.hostUserName===((e=i.profile())==null?null:e.username)?1:2),h(4),k(t.title),h(3),K("Category: ",t.category,""),h(2),Ne("Every ",i.getDaysOfWeekWords(t.dayOfWeek)," at ",t.time,"")}}function oi(o,a){o&1&&(l(0,"div",30),g(1,"No classes created or attended yet"),c())}function ri(o,a){if(o&1&&(l(0,"div",0)(1,"div",1)(2,"strong"),g(3,"Language Classes"),c()()(),pe(4,ni,11,5,"div",29,ce,!1,oi,2,0,"div",30)),o&2){let e,t=d();h(4),he((e=t.profile())==null?null:e.profileLanguageClasses)}}function ai(o,a){if(o&1&&(l(0,"div",29)(1,"div",32)(2,"h5"),g(3),c()(),l(4,"div",33)(5,"div",37)(6,"div",38),M(7,"img",39),c(),l(8,"div",40)(9,"p",41),g(10),c(),l(11,"p",41),g(12),c()()()()()),o&2){let e=a.$implicit;h(3),k(e.fullName),h(4),y("src",e.photoUrl,Y),h(3),K("Bio: ",e.bio,""),h(2),K("Username: ",e.username,"")}}function si(o,a){o&1&&(l(0,"div",30),g(1,"No followers yet"),c())}function li(o,a){if(o&1&&(l(0,"div",0)(1,"div",1)(2,"strong"),g(3,"Followers"),c()()(),pe(4,ai,13,4,"div",29,ce,!1,si,2,0,"div",30)),o&2){let e,t=d();h(4),he((e=t.profile())==null?null:e.followers)}}function ci(o,a){if(o&1&&(l(0,"div",29)(1,"div",32)(2,"h5"),g(3),c()(),l(4,"div",33)(5,"div",37)(6,"div",38),M(7,"img",42),c(),l(8,"div",40)(9,"p",41),g(10),c(),l(11,"p",41),g(12),c()()()()()),o&2){let e=a.$implicit;h(3),k(e.fullName),h(4),y("src",e==null?null:e.photoUrl,Y),h(3),K("Bio: ",e.bio,""),h(2),K("Username: ",e.username,"")}}function pi(o,a){o&1&&(l(0,"div",30),g(1,"No followings yet"),c())}function hi(o,a){if(o&1&&(l(0,"div",0)(1,"div",1)(2,"strong"),g(3,"Followings"),c()()(),pe(4,ci,13,4,"div",29,ce,!1,pi,2,0,"div",30)),o&2){let e,t=d();h(4),he((e=t.profile())==null?null:e.followings)}}var dt=(()=>{var a;let e=class e{constructor(){H(this,a,void 0);L(this,a,new se),this.followUser=new S,this.unFollowUser=new S,this.updateProfile=new S,this.uploadPhoto=new S,this.unsafeCroppedImage=new S,this.safecroppedImage=j.required(),this.currentUser=j.required(),this.profile=j.required(),this.listInfo=j.required(),this.isEditMode=$(!1),this.imageChangedEvent=$(""),this.crop=$(null),this.ProfileInfo=G,this.getDaysOfWeekWords=rt,this.isFollowMode=!1,me(()=>{this.profile()&&(this.isFollowMode=!this.profile()?.followers.some(i=>i.username===this.currentUser().userName),this.editProfileForm.patchValue({fullName:this.profile()?.fullName,bio:this.profile()?.bio}))})}ngOnInit(){this.editProfileForm=new et({fullName:new be("",[ne.required,ne.minLength(2)]),bio:new be("",[ne.required,ne.maxLength(1e3)])})}ngOnDestroy(){v(this,a).next(),v(this,a).complete()}get fullName(){return this.editProfileForm.get("fullName")}get bio(){return this.editProfileForm.get("bio")}follow(i){this.followUser.emit(i),this.isFollowMode=!0}unfollow(i){this.unFollowUser.emit(i),this.isFollowMode=!1}changeMode(){this.isEditMode.set(this.isEditMode()===!1)}submitFunc(){this.updateProfile.emit(this.editProfileForm.value),this.isEditMode.set(!1)}fileChangeEvent(i){this.imageChangedEvent.set(i)}cancelPhotoSelection(){this.imageChangedEvent.set(null)}imageCropped(i){this.unsafeCroppedImage.emit(i.objectUrl),this.crop.set(i.blob)}uploadFile(){if(this.crop()&&this.profile()?.id){let i=new FormData;i.append("file",this.crop()),i.append("id",this.profile().id),this.uploadPhoto.emit(i),this.imageChangedEvent.set(null)}}};a=new WeakMap,e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=P({type:e,selectors:[["app-profile-detail"]],inputs:{safecroppedImage:[N.SignalBased,"safecroppedImage"],currentUser:[N.SignalBased,"currentUser"],profile:[N.SignalBased,"profile"],listInfo:[N.SignalBased,"listInfo"]},outputs:{followUser:"followUser",unFollowUser:"unFollowUser",updateProfile:"updateProfile",uploadPhoto:"uploadPhoto",unsafeCroppedImage:"unsafeCroppedImage"},standalone:!0,features:[q],decls:5,vars:5,consts:[[1,"d-flex","justify-content-between","flex-row","w-100","px-2","pt-3"],[2,"font-size","20px"],[1,"fas","fa-user-alt","mr-3",2,"font-size","26px"],["type","button",1,"btn","btn-outline-secondary"],[1,"px-2","w-100","d-flex","flex-column"],[1,"card-body","pl-2","mt-4","alert","alert-primary"],["class","w-100 mt-3",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"card-text","text-break"],[1,"w-100","mt-3"],[1,"w-100",3,"ngSubmit","formGroup"],[1,"form-group"],["for","fullName"],["type","text","id","fullName","placeholder","Enter full name...","formControlName","fullName",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","bio"],["id","bio","rows","3","placeholder","Enter bio...","formControlName","bio",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"d-flex","justify-content-between","flex-row","w-100","px-2","pt-3","mb-3"],[1,"row","mb-3","justify-content-center"],["id","files","type","file",2,"visibility","hidden",3,"change"],["for","files",1,"btn","btn-outline-secondary"],[1,"col-4","p-1","mx-3"],["format","png",3,"imageCropped","imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth"],[1,"col-4","p-1","d-flex","flex-column","align-items-center","justify-content-center"],[2,"width","100%",3,"src"],["type","button",1,"btn","btn-success","w-100","mt-1",3,"click"],[1,"fa","fa-check"],[1,"card","w-100","mb-3","mt-2"],["role","alert",1,"alert","alert-warning","mt-2"],[1,"ribbon"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"ribbon-not-host"],[1,"row"],[1,"col-md-2","pl-2","pr-1"],["alt","image cap",2,"width","100%",3,"src"],[1,"col-md-10","pl-1"],[2,"font-size","18px"],["alt","Profile photo",2,"width","100%",3,"src"]],template:function(n,r){n&1&&A(0,Gt,13,4)(1,ei,6,2)(2,ri,7,1)(3,li,7,1)(4,hi,7,1),n&2&&(b(0,r.listInfo()===r.ProfileInfo.ABOUT&&r.currentUser()?0:-1),h(),b(1,r.listInfo()===r.ProfileInfo.PHOTO?1:-1),h(),b(2,r.listInfo()===r.ProfileInfo.CLASSES?2:-1),h(),b(3,r.listInfo()===r.ProfileInfo.FOLLOWERS?3:-1),h(),b(4,r.listInfo()===r.ProfileInfo.FOLLOWINGS?4:-1))},dependencies:[D,Xe,de,ot,tt,Ke,Je,Ze,it,nt,ht,pt]});let o=e;return o})();var dn=(()=>{var a,e,t,i,n;let r=class r{constructor(){H(this,a,void 0);H(this,e,void 0);H(this,t,void 0);H(this,i,void 0);H(this,n,void 0);L(this,a,new se),L(this,e,ie($e)),L(this,t,ie(Ge)),L(this,i,ie(at)),L(this,n,ie(fe)),this.profile=v(this,e).profile,this.photo=v(this,e).photo,this.currentUser=v(this,e).currentUser,this.safeCroppedImage=$(""),this.listInfo=$(G.ABOUT),this.userName="",me(()=>{v(this,t).paramMap.pipe(ke(p=>{let m=p.get("userName");return m?v(this,e).profile$(m):Pe}),Q(v(this,a))).subscribe({error:p=>console.error(p)})})}follow(p){v(this,e).followUser(p).pipe(Q(v(this,a))).subscribe({next:()=>{v(this,i).success(`User '${this.profile().fullName}' has been followed`)},error:m=>console.error(m)})}unfollow(p){v(this,e).unFollowUser(p).pipe(Q(v(this,a))).subscribe({next:()=>{v(this,i).success(`User '${this.profile().fullName}' has been unfollowed`)},error:m=>console.error(m)})}updateProfile(p){v(this,e).updateProfile(this.profile()?.username,p).pipe(Q(v(this,a))).subscribe({next:()=>{v(this,i).success("User info updated")},error:m=>console.error(m)})}uploadPhoto(p){v(this,e).uploadPhoto(p).pipe(Q(v(this,a))).subscribe({next:()=>{v(this,i).success("User image updated")},error:m=>console.error(m)})}getListInfo(p){this.listInfo.set(p)}getUnsafeCroppedImage(p){this.safeCroppedImage.set(v(this,n).bypassSecurityTrustUrl(p))}};a=new WeakMap,e=new WeakMap,t=new WeakMap,i=new WeakMap,n=new WeakMap,r.\u0275fac=function(m){return new(m||r)},r.\u0275cmp=P({type:r,selectors:[["app-profile"]],inputs:{userName:"userName"},standalone:!0,features:[q],decls:8,vars:6,consts:[[1,"mt-5","mb-3"],[1,"pt-5","container"],[3,"profile","photo"],[1,"d-flex","w-100"],[1,"col-9","shadow-lg","mt-4","align-items-start","w-100"],[3,"followUser","unFollowUser","updateProfile","uploadPhoto","unsafeCroppedImage","safecroppedImage","currentUser","profile","listInfo"],[1,"col-3","w-100","pt-4","pr-0","pl-4"],[3,"listInfo"]],template:function(m,f){m&1&&(l(0,"div",0)(1,"div",1),M(2,"app-profile-header",2),l(3,"div",3)(4,"div",4)(5,"app-profile-detail",5),x("followUser",function(w){return f.follow(w)})("unFollowUser",function(w){return f.unfollow(w)})("updateProfile",function(w){return f.updateProfile(w)})("uploadPhoto",function(w){return f.uploadPhoto(w)})("unsafeCroppedImage",function(w){return f.getUnsafeCroppedImage(w)}),c()(),l(6,"div",6)(7,"app-profile-list",7),x("listInfo",function(w){return f.getListInfo(w)}),c()()()()()),m&2&&(h(2),y("profile",f.profile())("photo",f.photo()),h(3),y("safecroppedImage",f.safeCroppedImage())("currentUser",f.currentUser())("profile",f.profile())("listInfo",f.listInfo()))},dependencies:[st,lt,dt,D]});let o=r;return o})();export{dn as ProfileComponent};
